# Results

## What is distribution of ratings for movies?

```{r}
library(tidyverse)

result=read.csv("result.csv")

avg_rating=result |>
  group_by(movieId) |>
  summarise(title = first(title),
            genres = first(genres),
            mean_score=mean(rating, na.rm=T)) 
ggplot(avg_rating, aes(x = mean_score)) +
  geom_histogram(fill = "lightblue", color = "black") +
  labs(title = "Distribution of Ratings Across Movies", x = "Average Rating", y = "Number of Movies") +
  theme_minimal()

```

The resulting histogram shows that the data is unimodal with the count peaking around 3. This means that the majority of movies are rated as average. It is also important to note that there are small peaks coming from the left and right of the data meaning that a select number of movies are consistently rated really good or really bad. 

## What is the Distribution of Ratings Across Users

```{r}
ratings=read.csv('/Users/erinma/Documents/STAT5702/ml-32m/ratings.csv')


avg_rating_user=ratings |>
  group_by(userId) |>
  summarise(mean_score=mean(rating)) 
ggplot(avg_rating_user, aes(x = mean_score)) +
  geom_histogram(fill = "lightblue", color = "black") +
  labs(title = "Histogram of Ratings Across Users", x = "Average Rating", y = "Number of Users") +
  theme_minimal()
```

This histogram shows that the dataset is skewing to the left with a peak between 3 and 4. The peak being above an average rating demonstrates that these users generally will rate movies fairly positively. 

## Certain Movies are Labeled Multiple Genres. Let's Review the Distribution of Movies and their Genre Counts

```{r}
avg_rating$genreCount <- sapply(avg_rating$genres, 
                                function(x) str_count(x, "\\|") + 1)

range(avg_rating$genreCount)

ggplot(avg_rating, aes(x = genreCount)) +
  geom_bar() +
  labs(title = "Bar Chart of Movie Count Given The Number of Genres", x = "Genre Count", y = "Number of Movies") +
  scale_x_continuous(breaks = seq(min(avg_rating$genreCount), max(avg_rating$genreCount),
                                  by = 1)) +
  theme_minimal()



```

Some movies fall under multiple genres and thus are labeled as such. To check this, we created a After an initial check to see that the range of labeled genres for each movie ranges from 1 to 10, we decided to make a graph seeing the number of movies that are labeled under each Genre Count. With this, we can see that the majority of movies are only labeled under one genre and the number of movies decreases as the genre count increases. 

## Does a Movie being labeled With More Genres Mean That it Will Be Better Rated?


```{r}
avg_rating_genre=avg_rating |>
  group_by(genreCount) |>
  summarise(mean_score_genre=mean(mean_score, na.rm=T), 
            count_genre=n()) 

ggplot(avg_rating_genre, aes(x = mean_score_genre, y = genreCount)) +
  geom_point(size = 3, color = "blue") +
  labs(
    title = "Cleveland Dot Plot Display of the Average Rating Across Different Genre Counts",
    x = "Average Rating",
    y = "Genre Count"
  ) +
  scale_x_continuous(limits=c(0, 5)) +
   scale_y_continuous(
    breaks = seq(1, nrow(avg_rating_genre), 1), 
  ) +
  theme_minimal()
```

We built a Cleveland Dot Plot to check on the Rating for each genre count. The resulting graph above shows no pattern between genre counts and average rating as it seems that movies with 7 genres labeled rank better than movies with 1 genre labeled but movies with 10 genres labeled rank worse than movies with 1 genre labeled. Additionally, all of these average ratings are grouped around a rating of 3 meaning that there is no genre count that is significantly rated better than the others. Furthermore, biases in average rating might occur as (as seen above in the bar chart) as the genre count increases, the number of movies in that category decreases which means that the mean is not accurate as it is based on less data. 

## Viewing the Distribution of Ratings for Movies Given the Genre Count

```{r}
ggplot(avg_rating, aes(x=mean_score))+
  geom_histogram() + 
  facet_wrap(~genreCount, scales="free_y") +
  labs(title = "Distribution of Ratings Faceted by Genre Count", x = "Average Rating", y = "Number of Movies")
```

By faceting on Genre Counts we can see if anomalies in distribution exist in certain genre counts. The resulting graph shows us that besides certain graphs that have minimal data, most genre counts follow the same distribution of having movies rated at an average rating

## Let's see the Distribution of Ratings when Looking at Singular Genre Movies

```{r}
avg_rating_1=filter(avg_rating, genreCount==1)

ggplot(avg_rating_1, aes(x=mean_score))+
  geom_histogram(alpha=0.5) + 
  facet_wrap(~genres, scales="free_y") + 
  labs(title = "Distribution of Ratings Faceted by Genres for Singular Genre Movies", x = "Average Rating", y = "Number of Movies")
```

When faceting on genre for single genre movies, we can see that most genres follow the trends we previously discussed. However, we can note that the distribution of Children's Movies is very interesting as a large portion of movies are rated really poorly and a large portion of movies are rated really positively. Similarly, for Romance movies, it seems that the highest bar in the histogram occurs near 5 meaning that a large portion of Romance Movies are rated very positively. 

## Double Checking The Counts of Each Genre for Single Genre Movies. 


```{r}
avg_rating_1$genres <- fct_reorder(avg_rating_1$genres, avg_rating_1$genres, .fun = length, .desc = TRUE)


ggplot(avg_rating_1, aes(x = genres)) +
  geom_bar() +
  labs(title = "Bar Chart of the Number of Movies Based on Genre ", x = "Genre", y = "Number of Movies") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1))



```

As seen above, the genre that is occurs most in the dataset is Drama while the genre that occurs least in the dataset is IMAX.

## Do Programs with Longer Title Runtimes Score Have Higher Ratings?

```{r}
library(readr)

data <- read_tsv('title.basics.tsv')
data$genres=NULL
data$primaryTitle=NULL
data$originalTitle=NULL
variable='/Users/erinma/Documents/STAT5702/ml-32m/'
links <- read.csv(file.path(variable, 'links.csv'))


joinLink <- merge(avg_rating, links, by = "movieId", all.x = TRUE)
data$tconst <- as.numeric(gsub("\\D", "", data$tconst))
names(data)[1] <- "imdbId"
imdbCombine <- merge(joinLink, data, by = "imdbId", all.x = TRUE)
imdbCombineMinutes=filter(imdbCombine, runtimeMinutes!='\\N')
imdbCombineMinutes$runtimeMinutes=as.numeric(imdbCombineMinutes$runtimeMinutes)

```

```{r}
ggplot(imdbCombineMinutes, aes(x=runtimeMinutes, y=mean_score))+
  geom_hex()+
  scale_fill_distiller(palette='Reds', direction=1) + 
  facet_wrap(~titleType) +
  labs(title = "Heat Map of Score Vs. RunTime ", x = "Title RunTime", y = "Average Rating")+
  theme(axis.text.x = element_text(angle = 90))
```


```{r}
ggplot(imdbCombineMinutes, aes(x=runtimeMinutes, y=mean_score, color=titleType))+
  geom_point(alpha=0.5)+
  theme(axis.text.x = element_text(angle = 90)) +
  labs(title = "Scatterplot of Score Vs. RunTime ", x = "Title RunTime", y = "Average Rating", color = "Film Type")
```

The Heat Map and Scatterplot show that very few title runtime goes above 400 minutes but there generally seems like there is a positive trend between Rating and Title RunTime. Furthermore, it seems that most shorts and tvshorts have the quickest title runtimes and that movie title runtimes seem to be generally higher than shorts 

